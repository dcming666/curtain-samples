"use strict";(self["webpackChunkfrontend_app"]=self["webpackChunkfrontend_app"]||[]).push([[846],{846:function(e,r,a){a.r(r),a.d(r,{default:function(){return p}});var n=a(6768),o=a(5130);const t={class:"login-container"},l={key:0,class:"login-error"},i={class:"back-to-home"};function s(e,r,a,s,u,c){const d=(0,n.g2)("el-input"),g=(0,n.g2)("el-form-item"),h=(0,n.g2)("el-alert"),m=(0,n.g2)("el-button"),p=(0,n.g2)("router-link"),f=(0,n.g2)("el-form"),b=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",t,[(0,n.bF)(b,{class:"login-card"},{header:(0,n.k6)((()=>r[2]||(r[2]=[(0,n.Lk)("div",{class:"login-header"},[(0,n.Lk)("h2",null,"管理员登录"),(0,n.Lk)("p",null,"窗帘样本管理系统")],-1)]))),default:(0,n.k6)((()=>[(0,n.bF)(f,{ref:"loginFormRef",model:s.loginForm,rules:s.loginRules,"label-position":"top",onSubmit:(0,o.D$)(s.handleLogin,["prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"用户名",prop:"username"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:s.loginForm.username,"onUpdate:modelValue":r[0]||(r[0]=e=>s.loginForm.username=e),"prefix-icon":"el-icon-user",placeholder:"请输入管理员用户名",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(g,{label:"密码",prop:"password"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:s.loginForm.password,"onUpdate:modelValue":r[1]||(r[1]=e=>s.loginForm.password=e),"prefix-icon":"el-icon-lock",type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),s.authStore.error?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(h,{title:s.authStore.error,type:"error","show-icon":""},null,8,["title"])])):(0,n.Q3)("",!0),(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(m,{type:"primary","native-type":"submit",loading:s.authStore.loading,class:"login-button"},{default:(0,n.k6)((()=>r[3]||(r[3]=[(0,n.eW)(" 登录 ")]))),_:1},8,["loading"])])),_:1}),(0,n.Lk)("div",i,[(0,n.bF)(p,{to:{name:"Home"}},{default:(0,n.k6)((()=>r[4]||(r[4]=[(0,n.eW)("返回前台首页")]))),_:1})])])),_:1},8,["model","rules","onSubmit"])])),_:1})])}a(4114);var u=a(144),c=a(1387),d=a(1570),g={name:"Login",setup(){const e=(0,c.rd)(),r=(0,d.useAuthStore)(),a=(0,u.KR)(null),n=(0,u.Kh)({username:"",password:""}),o={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应为3-20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},t=async()=>{a.value&&await a.value.validate((async a=>{if(a){const a=await r.login(n);a&&e.push({name:"Admin"})}}))};return{loginForm:n,loginRules:o,loginFormRef:a,authStore:r,handleLogin:t}}},h=a(1241);const m=(0,h.A)(g,[["render",s],["__scopeId","data-v-673ca954"]]);var p=m},1570:function(e,r,a){a.d(r,{x:function(){return o}});a(8111),a(116);var n=a(2261);const o=(0,n.nY)("curtain",{state:()=>({curtains:[],categories:[],currentCurtain:null,loading:!1,error:null}),actions:{async fetchCurtains(){this.loading=!0;try{const e=await fetch("/data/curtains.json"),r=await e.json();this.curtains=r.curtains,this.error=null}catch(e){this.error="获取窗帘样本失败: "+e.message,console.error("获取窗帘样本失败:",e)}finally{this.loading=!1}},async fetchCurtainById(e){this.loading=!0;try{const r=await fetch("/data/curtains.json"),a=await r.json();this.currentCurtain=a.curtains.find((r=>r.id===e)),this.error=null}catch(r){this.error="获取窗帘样本详情失败: "+r.message,console.error("获取窗帘样本详情失败:",r)}finally{this.loading=!1}},async fetchCategories(){this.loading=!0;try{const e=await fetch("/data/curtains.json"),r=await e.json();this.categories=r.categories,this.error=null}catch(e){this.error="获取分类失败: "+e.message,console.error("获取分类失败:",e)}finally{this.loading=!1}}}})}}]);
//# sourceMappingURL=846.33142d9b.js.map